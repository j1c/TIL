---
layout: post
title: Fix WSL not connecting to internet
tags: [WSL, TIL]
author: Jaewon Chung
comments: True
---

WSL sometimes cannot connect to the internet and the following message appears when you try to use `apt`, `git push/pull`, etc:

```{bash}
Temporary failure in name resolution
```

The reason this error occurs is because Windows automatically generates `resolv.conf` file with wrong nameserver.

To resolve the issue, edit the `resolv.conf` file as follows:

1. Open the file

```{bash}
sudo nano /etc/resolv.conf
```

2. The contents of the file should look something like

```{bash}
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver 172.30.240.1
```

3. Remove the comment markers for line 2 and 3, and should look like

```{bash}
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
[network]
generateResolvConf = false
nameserver 172.30.240.1
```

4. Change the nameserver to one of the free DNS servers such as `1.1.1.1` (Cloudflare) or `8.8.8.8` (Google)

```{bash}
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
[network]
generateResolvConf = false
nameserver 8.8.8.8
```

5. Save and exit the file.

WSl should be able to connect to the internet at this point!
